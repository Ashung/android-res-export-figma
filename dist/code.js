!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=91)}({91:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function l(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,o)}c((i=i.apply(e,t||[])).next())})};let i=figma.command,a=figma.currentPage.selection;const r=[{scale:1,dir:"drawable-mdpi/"},{scale:1.5,dir:"drawable-hdpi/"},{scale:2,dir:"drawable-xhdpi/"},{scale:3,dir:"drawable-xxhdpi/"},{scale:4,dir:"drawable-xxxhdpi/"}],l=[{scale:1,dir:"mipmap-mdpi/"},{scale:1.5,dir:"mipmap-hdpi/"},{scale:2,dir:"mipmap-xhdpi/"},{scale:3,dir:"mipmap-xxhdpi/"},{scale:4,dir:"mipmap-xxxhdpi/"}];if("export-png"===i)if(0===a.length)figma.closePlugin("Please select at least 1 slice layer, exportable layer or group include slice.");else{let e=[];a.forEach(t=>{("SLICE"===t.type||t.exportSettings.length>0)&&e.push(t),"GROUP"===t.type&&t.findAll(e=>"SLICE"===e.type||e.exportSettings.length>0).forEach(t=>{e.push(t)})}),0===e.length?figma.closePlugin("No exportable layers in selection."):Promise.all(e.map(e=>h(e,r))).then(e=>{figma.showUI(__html__,{width:456,height:288}),figma.ui.postMessage({type:"export-png",exportImages:e})}).catch(e=>{console.log(e),figma.closePlugin()})}if("new-nine-patch"===i)if(0===a.length)figma.closePlugin("Please select at least 1 layer.");else{if(a.some(e=>"nine-patch"===e.getPluginData("resourceType")))figma.closePlugin("Selected layers have a nine-patch resource.");else if(1===a.length&&s(a[0])){a[0].setPluginData("resourceType","nine-patch")}else{let e=[1/0,-1/0,-1/0,1/0];function o(t){if(function(t){const n=t.rotation,i=t.x,a=t.y,r=t.width,l=t.height,o=Math.PI;let c,s,h,p;n<0?(c=a,s=i+Math.cos(n*o/180)*r,h=a+Math.cos(-n*o/180)*l+Math.sin(-n*o/180)*r,p=i-Math.sin(-n*o/180)*l):(c=a-Math.sin(n*o/180)*r,s=i+Math.cos(n*o/180)*r+Math.sin(n*o/180)*l,h=a+Math.cos(n*o/180)*l,p=i);t.effects&&t.effects.forEach(e=>{if("DROP_SHADOW"===e.type&&!0===e.visible){let t=e.offset.x,n=e.offset.y;const i=e.radius;let a=[c,s,h,p];t>0?a[1]+=t:a[3]+=t,n>0?a[2]+=n:a[0]+=n,i>0&&(n<i&&(a[0]-=i),t>-i&&(a[1]+=i),n>-i&&(a[2]+=i),t<i&&(a[3]-=i)),c=Math.min(a[0],c),s=Math.max(a[1],s),h=Math.max(a[2],h),p=Math.min(a[3],p)}if("LAYER_BLUR"===e.type&&!0===e.visible){const t=e.radius;c-=t,s+=t,h+=t,p-=t}});e[0]=Math.min(e[0],c),e[1]=Math.max(e[1],s),e[2]=Math.max(e[2],h),e[3]=Math.min(e[3],p),e[0]=Math.floor(e[0]),e[1]=Math.ceil(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.floor(e[3])}(t),"children"in t&&"INSTANCE"!==t.type)for(const e of t.children)o(e)}a.forEach(e=>{o(e)});const t=a[a.length-1],n=t.parent;let i=figma.group(a,n,n.children.indexOf(t));i.name="content";let r={type:"SOLID",color:{r:0,g:0,b:0}},l=figma.createRectangle();l.name="left",l.x=e[3]-1,l.y=e[0],l.resize(1,e[2]-e[0]),l.fills=[r];let c=figma.createRectangle();c.name="top",c.x=e[3],c.y=e[0]-1,c.resize(e[1]-e[3],1),c.fills=[r];let s=figma.createRectangle();s.name="right",s.x=e[1],s.y=e[0],s.resize(1,e[2]-e[0]),s.fills=[r];let h=figma.createRectangle();h.name="bottom",h.x=e[3],h.y=e[2],h.resize(e[1]-e[3],1),h.fills=[r];let u=i.parent.children.indexOf(i)+1,f=figma.group([l,c,s,h],i.parent,u);f.name="patch",f.x=e[3]-1,f.y=e[0]-1;let g=f.parent.children.indexOf(f)+1,d=figma.group([i,f],f.parent,g);d.name=p(t.name),figma.currentPage.selection=[d],d.setPluginData("resourceType","nine-patch")}figma.closePlugin()}if("export-nine-patch"===i)if(0===a.length)figma.closePlugin("Please select at least 1 nine-patch asset.");else{let e=[];a.forEach(t=>{s(t)&&"nine-patch"===t.getPluginData("resourceType")&&e.push(t)}),0===e.length?figma.closePlugin("No any nine-patch asset in selection."):Promise.all(e.map(e=>(function(e,t){return n(this,void 0,void 0,function*(){let i=e.findOne(e=>"patch"===e.name),a=e.findOne(e=>"content"===e.name);if(!i&&!a)return;let r=p(e.name),l=figma.createSlice();l.name=r,l.x=e.x+1,l.y=e.y+1,l.resize(e.width-2,e.height-2),a.appendChild(l);let o=yield i.exportAsync(),c=yield Promise.all(t.map(e=>n(this,void 0,void 0,function*(){const t={format:"PNG",constraint:{type:"SCALE",value:e.scale}},n=yield l.exportAsync(t),i=e.scale;return{scale:i,width:Math.round(l.width*i),height:Math.round(l.height*i),path:e.dir+r+".9.png",imageData:n}})));return l.remove(),{name:r,patchImage:{width:i.width,height:i.height,imageData:o},contentImages:c}})})(e,r))).then(e=>{figma.showUI(__html__,{width:456,height:288}),figma.ui.postMessage({type:"export-nine-patch",exportImages:e})}).catch(e=>{console.log(e),figma.closePlugin()})}if("new-app-icon"===i){function c(e,t,n,i,a,r,l,o,c,s,h,p){const u=figma.createFrame();u.name=c,u.x=e,u.y=t,u.resize(n,i),!1===p&&(u.backgrounds=[]);const f=figma.createRectangle();f.name="grid",f.x=a,f.y=r,f.resize(l,o);const g={type:"IMAGE",scaleMode:"FILL",imageHash:figma.createImage(s).hash};f.fills=[g],u.appendChild(f),h.appendChild(u)}figma.showUI(__html__,{visible:!1}),figma.ui.postMessage("new-app-icon"),figma.ui.onmessage=e=>{const t=figma.createPage();t.name="app icon",figma.currentPage=t,c(0,0,48,48,0,0,48,48,"ic_launcher",e.old_icon_grid,t,!1),c(98,0,108,108,0,0,108,108,"ic_launcher_background",e.adaptive_icon_grid,t,!0),c(256,0,108,108,0,0,108,108,"ic_launcher_foreground",e.adaptive_icon_grid,t,!1),c(414,0,512,512,64,64,384,384,"playstore_icon",e.old_icon_grid,t,!0),figma.closePlugin()}}if("export-app-icon"===i){let e,t,n,i;if(figma.root.children.forEach(a=>{const r=a.findOne(e=>"FRAME"===e.type&&"ic_launcher"===e.name),l=a.findOne(e=>"FRAME"===e.type&&"ic_launcher_background"===e.name),o=a.findOne(e=>"FRAME"===e.type&&"ic_launcher_foreground"===e.name),c=a.findOne(e=>"FRAME"===e.type&&"playstore_icon"===e.name);r&&l&&o&&(e=r,t=l,n=o,i=c)}),e&&t&&n){let a=[];a.push(h(e,l)),a.push(h(t,l)),a.push(h(n,l)),i&&a.push(h(i,[{scale:1,dir:""}])),Promise.all(a).then(e=>{figma.showUI(__html__,{width:456,height:288}),figma.ui.postMessage({type:"export-app-icon",exportImages:e})}).catch(e=>{console.log(e),figma.closePlugin()})}else{let i=[];e||i.push("ic_launcher"),t||i.push("ic_launcher_background"),n||i.push("ic_launcher_foreground"),figma.closePlugin("Can't find the frame named \""+i.join(", ")+'".')}}function s(e){if("GROUP"===e.type&&e.findOne(e=>"patch"===e.name&&"GROUP"===e.type)&&e.findOne(e=>"content"===e.name&&"GROUP"===e.type)){const t=e.findOne(e=>"patch"===e.name&&"GROUP"===e.type),n=e.findOne(e=>"content"===e.name&&"GROUP"===e.type);if(t.children.length>3&&n.children.length>0)return!0}return!1}function h(e,t){return n(this,void 0,void 0,function*(){let i=p(e.name);return yield Promise.all(t.map(t=>n(this,void 0,void 0,function*(){const n={format:"PNG",constraint:{type:"SCALE",value:t.scale}},a=yield e.exportAsync(n),r=t.scale;return{width:Math.round(e.width*r),height:Math.round(e.height*r),path:t.dir+i+".png",imageData:a}})))})}function p(e){e=e.substr(e.lastIndexOf("/")+1);const t={ae:"ä|æ|ǽ",oe:"ö|œ",ue:"ü",Ae:"Ä",Ue:"Ü",Oe:"Ö",A:"À|Á|Â|Ã|Ä|Å|Ǻ|Ā|Ă|Ą|Ǎ",a:"à|á|â|ã|å|ǻ|ā|ă|ą|ǎ|ª",C:"Ç|Ć|Ĉ|Ċ|Č",c:"ç|ć|ĉ|ċ|č",D:"Ð|Ď|Đ",d:"ð|ď|đ",E:"È|É|Ê|Ë|Ē|Ĕ|Ė|Ę|Ě",e:"è|é|ê|ë|ē|ĕ|ė|ę|ě",G:"Ĝ|Ğ|Ġ|Ģ",g:"ĝ|ğ|ġ|ģ",H:"Ĥ|Ħ",h:"ĥ|ħ",I:"Ì|Í|Î|Ï|Ĩ|Ī|Ĭ|Ǐ|Į|İ",i:"ì|í|î|ï|ĩ|ī|ĭ|ǐ|į|ı",J:"Ĵ",j:"ĵ",K:"Ķ",k:"ķ",L:"Ĺ|Ļ|Ľ|Ŀ|Ł",l:"ĺ|ļ|ľ|ŀ|ł",N:"Ñ|Ń|Ņ|Ň",n:"ñ|ń|ņ|ň|ŉ",O:"Ò|Ó|Ô|Õ|Ō|Ŏ|Ǒ|Ő|Ơ|Ø|Ǿ",o:"ò|ó|ô|õ|ō|ŏ|ǒ|ő|ơ|ø|ǿ|º",R:"Ŕ|Ŗ|Ř",r:"ŕ|ŗ|ř",S:"Ś|Ŝ|Ş|Š",s:"ś|ŝ|ş|š|ſ",T:"Ţ|Ť|Ŧ",t:"ţ|ť|ŧ",U:"Ù|Ú|Û|Ũ|Ū|Ŭ|Ů|Ű|Ų|Ư|Ǔ|Ǖ|Ǘ|Ǚ|Ǜ",u:"ù|ú|û|ũ|ū|ŭ|ů|ű|ų|ư|ǔ|ǖ|ǘ|ǚ|ǜ",Y:"Ý|Ÿ|Ŷ",y:"ý|ÿ|ŷ",W:"Ŵ",w:"ŵ",Z:"Ź|Ż|Ž",z:"ź|ż|ž",AE:"Æ|Ǽ",ss:"ß",IJ:"Ĳ",ij:"ĳ",OE:"Œ",f:"ƒ"};for(let n in t){let i=new RegExp(t[n],"g");e=e.replace(i,n)}return""===(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[^\u0020-\u007E]/g,"")).replace(/[\u0021-\u002B\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007E]/g,"")).replace(/^\./,"")).replace(/^\d+/,"")).replace(/[\u002C-\u002E\u005F]/g,"_")).trim()).replace(/\s+/g,"_")).toLowerCase())?"untitled":e}}});