!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}({18:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function l(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,l)}c((i=i.apply(e,t||[])).next())})};let i=figma.command,a=figma.currentPage.selection;const r={1:"mdpi",1.5:"hdpi",2:"xhdpi",3:"xxhdpi",4:"xxxhdpi"};if("export-png"===i)if(0===a.length)s("Please select at least 1 slice layer, exportable layer or group include slice.");else{let e=[];a.forEach(t=>{("SLICE"===t.type||t.exportSettings.length>0)&&e.push(t),t.findAll(e=>"SLICE"===e.type||e.exportSettings.length>0).forEach(t=>{e.push(t)})}),0===e.length?s("No exportable layers in selection."):Promise.all(e.map(e=>(function(e){return n(this,void 0,void 0,function*(){let t=c(e.name),i=[];for(let e in r)i.push({format:"PNG",constraint:{type:"SCALE",value:Number(e)}});let a=yield Promise.all(i.map(i=>n(this,void 0,void 0,function*(){let n=yield e.exportAsync(i),a=i.constraint.value;return{width:Math.round(e.width*a),height:Math.round(e.height*a),path:"drawable-"+r[a]+"/"+t+".png",imageData:n}})));return a})})(e))).then(e=>{figma.showUI(__html__,{width:300,height:150}),figma.ui.postMessage({type:"export-png",exportImages:e})}).catch(e=>{console.error(e),figma.closePlugin()})}if("new-nine-patch"===i){if(a.some(e=>"nine-patch"===e.getPluginData("resourceType")))s("Selected layers have a nine-patch resource.");else{let e=[1/0,-1/0,-1/0,1/0];function o(t){if(function(t){const n=t.rotation,i=t.x,a=t.y,r=t.width,o=t.height,l=Math.PI;let c,s,h,u;n<0?(c=a,s=i+Math.cos(n*l/180)*r,h=a+Math.cos(-n*l/180)*o+Math.sin(-n*l/180)*r,u=i-Math.sin(-n*l/180)*o):(c=a-Math.sin(n*l/180)*r,s=i+Math.cos(n*l/180)*r+Math.sin(n*l/180)*o,h=a+Math.cos(n*l/180)*o,u=i);t.effects&&t.effects.forEach(e=>{if("DROP_SHADOW"===e.type&&!0===e.visible){let t=e.offset.x,n=e.offset.y;const i=e.radius;let a=[c,s,h,u];t>0?a[1]+=t:a[3]+=t,n>0?a[2]+=n:a[0]+=n,i>0&&(n<i&&(a[0]-=i),t>-i&&(a[1]+=i),n>-i&&(a[2]+=i),t<i&&(a[3]-=i)),c=Math.min(a[0],c),s=Math.max(a[1],s),h=Math.max(a[2],h),u=Math.min(a[3],u)}if("LAYER_BLUR"===e.type&&!0===e.visible){const t=e.radius;c-=t,s+=t,h+=t,u-=t}});e[0]=Math.min(e[0],c),e[1]=Math.max(e[1],s),e[2]=Math.max(e[2],h),e[3]=Math.min(e[3],u),e[0]=Math.floor(e[0]),e[1]=Math.ceil(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.floor(e[3])}(t),"children"in t&&"INSTANCE"!==t.type)for(const e of t.children)o(e)}a.forEach(e=>{o(e)});const t=a[a.length-1],n=t.parent;let i=figma.group(a,n,n.children.indexOf(t));i.name="content";let r={type:"SOLID",color:{r:0,g:0,b:0}},l=figma.createRectangle();l.name="left",l.x=e[3]-1,l.y=e[0],l.resize(1,e[2]-e[0]),l.fills=[r];let s=figma.createRectangle();s.name="top",s.x=e[3],s.y=e[0]-1,s.resize(e[1]-e[3],1),s.fills=[r];let h=figma.createRectangle();h.name="right",h.x=e[1],h.y=e[0],h.resize(1,e[2]-e[0]),h.fills=[r];let u=figma.createRectangle();u.name="bottom",u.x=e[3],u.y=e[2],u.resize(e[1]-e[3],1),u.fills=[r];let f=i.parent.children.indexOf(i)+1,p=figma.group([l,s,h,u],i.parent,f);p.name="patch",p.x=e[3]-1,p.y=e[0]-1;let g=p.parent.children.indexOf(p)+1,m=figma.group([i,p],p.parent,g);m.name=c(t.name),figma.currentPage.selection=[m],m.setPluginData("resourceType","nine-patch")}figma.closePlugin()}if("export-nine-patch"===i)if(0===a.length)s("Please select at least 1 nine-patch asset.");else{let e=[];a.forEach(t=>{"GROUP"===t.type&&"nine-patch"===t.getPluginData("resourceType")&&t.findOne(e=>"patch"===e.name)&&t.findOne(e=>"content"===e.name)&&e.push(t)}),0===e.length?s("No any nine-patch asset in selection."):Promise.all(e.map(e=>(function(e){return n(this,void 0,void 0,function*(){let t=e.findOne(e=>"patch"===e.name),i=e.findOne(e=>"content"===e.name);if(!t&&!i)return;let a=c(e.name),o=figma.createSlice();o.name=a,o.x=e.x+1,o.y=e.y+1,o.resize(e.width-2,e.height-2),i.appendChild(o);let l=[];for(let e in r)l.push({format:"PNG",constraint:{type:"SCALE",value:Number(e)}});o.exportSettings=l;let s=yield t.exportAsync(),h=yield Promise.all(l.map(e=>n(this,void 0,void 0,function*(){let t=yield o.exportAsync(e),n=e.constraint.value;return{scale:n,width:Math.round(o.width*n),height:Math.round(o.height*n),path:"drawable-"+r[n]+"/"+a+".9.png",imageData:t}})));return o.remove(),{name:a,patchImage:{width:t.width,height:t.height,imageData:s},contentImages:h}})})(e))).then(e=>{console.log(e),figma.showUI(__html__,{width:300,height:150}),figma.ui.postMessage({type:"export-nine-patch",exportImages:e})}).catch(e=>{console.error(e),figma.closePlugin()})}if("new-app-icon"===i){function l(e,t,n,i,a,r,o,l,c,s,h){const u=figma.createFrame();u.name=c,u.x=e,u.y=t,u.resize(n,i);const f=figma.createRectangle();f.name="grid",f.x=a,f.y=r,f.resize(o,l);const p={type:"IMAGE",scaleMode:"FILL",imageHash:figma.createImage(s).hash};f.fills=[p],u.appendChild(f),h.appendChild(u)}figma.showUI(__html__,{visible:!1}),figma.ui.postMessage("new-app-icon"),figma.ui.onmessage=e=>{const t=figma.createPage();t.name="app icon",l(0,0,48,48,0,0,48,48,"ic_launcher",e.old_icon_grid,t),l(98,0,108,108,0,0,108,108,"ic_background",e.adaptive_icon_grid,t),l(256,0,108,108,0,0,108,108,"ic_foreground",e.adaptive_icon_grid,t),l(414,0,512,512,64,64,384,384,"google_play_icon",e.old_icon_grid,t),figma.closePlugin()}}function c(e){var t={ae:"ä|æ|ǽ",oe:"ö|œ",ue:"ü",Ae:"Ä",Ue:"Ü",Oe:"Ö",A:"À|Á|Â|Ã|Ä|Å|Ǻ|Ā|Ă|Ą|Ǎ",a:"à|á|â|ã|å|ǻ|ā|ă|ą|ǎ|ª",C:"Ç|Ć|Ĉ|Ċ|Č",c:"ç|ć|ĉ|ċ|č",D:"Ð|Ď|Đ",d:"ð|ď|đ",E:"È|É|Ê|Ë|Ē|Ĕ|Ė|Ę|Ě",e:"è|é|ê|ë|ē|ĕ|ė|ę|ě",G:"Ĝ|Ğ|Ġ|Ģ",g:"ĝ|ğ|ġ|ģ",H:"Ĥ|Ħ",h:"ĥ|ħ",I:"Ì|Í|Î|Ï|Ĩ|Ī|Ĭ|Ǐ|Į|İ",i:"ì|í|î|ï|ĩ|ī|ĭ|ǐ|į|ı",J:"Ĵ",j:"ĵ",K:"Ķ",k:"ķ",L:"Ĺ|Ļ|Ľ|Ŀ|Ł",l:"ĺ|ļ|ľ|ŀ|ł",N:"Ñ|Ń|Ņ|Ň",n:"ñ|ń|ņ|ň|ŉ",O:"Ò|Ó|Ô|Õ|Ō|Ŏ|Ǒ|Ő|Ơ|Ø|Ǿ",o:"ò|ó|ô|õ|ō|ŏ|ǒ|ő|ơ|ø|ǿ|º",R:"Ŕ|Ŗ|Ř",r:"ŕ|ŗ|ř",S:"Ś|Ŝ|Ş|Š",s:"ś|ŝ|ş|š|ſ",T:"Ţ|Ť|Ŧ",t:"ţ|ť|ŧ",U:"Ù|Ú|Û|Ũ|Ū|Ŭ|Ů|Ű|Ų|Ư|Ǔ|Ǖ|Ǘ|Ǚ|Ǜ",u:"ù|ú|û|ũ|ū|ŭ|ů|ű|ų|ư|ǔ|ǖ|ǘ|ǚ|ǜ",Y:"Ý|Ÿ|Ŷ",y:"ý|ÿ|ŷ",W:"Ŵ",w:"ŵ",Z:"Ź|Ż|Ž",z:"ź|ż|ž",AE:"Æ|Ǽ",ss:"ß",IJ:"Ĳ",ij:"ĳ",OE:"Œ",f:"ƒ"};for(var n in t){var i=new RegExp(t[n],"g");e=e.replace(i,n)}return""===(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[^\u0020-\u007E]/g,"")).replace(/[\u0021-\u002B\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007E]/g,"")).replace(/^\./,"")).replace(/^\d+/,"")).replace(/[\u002C-\u002E\u005F]/g,"_")).trim()).replace(/\s+/g,"_")).toLowerCase())?"untitled":e}function s(e){figma.showUI(__html__,{visible:!0,width:300,height:120}),figma.ui.postMessage({type:"show-message",text:e});setTimeout(()=>{figma.closePlugin()},3e3)}}});